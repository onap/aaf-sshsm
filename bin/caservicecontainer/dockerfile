# Base Image for the build
FROM nexus3.onap.org:10001/onap/aaf/aaf-base-xenial:latest

# Files required for the Java application
RUN wget https://www.bouncycastle.org/download/bcprov-jdk15on-159.jar
RUN wget https://www.bouncycastle.org/download/bcpkix-jdk15on-159.jar
RUN wget https://www.bouncycastle.org/download/bcmail-jdk15on-159.jar
RUN wget https://www.bouncycastle.org/download/bcpg-jdk15on-159.jar
RUN wget https://www.bouncycastle.org/download/bctls-jdk15on-159.jar
RUN cp ./bcpkix-jdk15on-159.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/
RUN cp ./bcprov-jdk15on-159.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/
RUN cp ./bcmail-jdk15on-159.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/
RUN cp ./bcpg-jdk15on-159.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext/
RUN cp ./bctls-jdk15on-159.jar /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/ext

# Create the directory for mounting the shared voulme
RUN mkdir -p /tmp/files

COPY ./import.sh /
COPY ./softhsmconfig.sh /
COPY ./application.sh /
